language: go
go:
  - 1.7

sudo: required

services:
  - docker

branches:
  only:
    - master
    - /^test_/
    - /^test-/

install:
  - go test -i .

script:
  - go test . && GOOS=linux GOARCH=amd64 go build . && ./travis_docker_push.sh
